name: Mark stale issues and pull requests

on:
  schedule:
    - cron: '30 1 * * *' # Run daily at 01:30 UTC

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v9
        with:
          stale-issue-message: |
            This issue has been automatically marked as stale because it has not had
            recent activity. It will be closed if no further activity occurs.

            If this issue is still relevant, please:
            - Add a comment explaining why it should remain open
            - Add the label `pinned` or `security` to prevent it from being closed
            - Consider opening a pull request if you can contribute a fix
          stale-pr-message: |
            This pull request has been automatically marked as stale because it has not had
            recent activity. It will be closed if no further activity occurs.

            If this PR is still relevant, please:
            - Add a comment explaining why it should remain open
            - Address any review comments or requested changes
            - Consider rebasing if there are conflicts with the main branch
          days-before-stale: 60
          days-before-close: 14
          exempt-issue-labels: 'pinned,security,good first issue,help wanted,bug'
          exempt-pr-labels: 'pinned,security,work-in-progress'
          stale-issue-label: 'stale'
          stale-pr-label: 'stale'